---
import "../styles/global.css";
import memories from "../data/memories.json";

// Ambil 2 memori pertama (bisa kamu ubah)
const preview = memories.slice(0, 2);
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>My Space ‚Äî Yusuf</title>
    <style>
      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-20px); }
      }
      @keyframes swim {
        0%, 100% { transform: translateX(0px) rotate(0deg); }
        25% { transform: translateX(10px) rotate(2deg); }
        75% { transform: translateX(-10px) rotate(-2deg); }
      }
      @keyframes bubble {
        0% { transform: translateY(0) scale(0); opacity: 0; }
        50% { opacity: 0.6; }
        100% { transform: translateY(-100vh) scale(1); opacity: 0; }
      }
      @keyframes modalFadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      @keyframes modalSlideIn {
        from { transform: scale(0.9) translateY(20px); opacity: 0; }
        to { transform: scale(1) translateY(0); opacity: 1; }
      }
      .mola-float { animation: float 6s ease-in-out infinite; }
      .mola-swim { animation: swim 8s ease-in-out infinite; }
      .bubble {
        position: fixed;
        bottom: -50px;
        background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), rgba(147,197,253,0.3));
        border-radius: 50%;
        animation: bubble linear infinite;
        pointer-events: none;
        z-index: 1;
      }
      .modal-backdrop {
        animation: modalFadeIn 0.3s ease-out;
      }
      .modal-content {
        animation: modalSlideIn 0.3s ease-out;
      }
    </style>
  </head>

  <body class="relative overflow-x-hidden bg-gradient-to-b from-blue-50 via-cyan-50 to-blue-100 text-gray-800 pt-28">
    <!-- Bubbles Background -->
    <div class="bubble" style="width: 30px; height: 30px; left: 10%; animation-duration: 8s; animation-delay: 0s;"></div>
    <div class="bubble" style="width: 20px; height: 20px; left: 30%; animation-duration: 10s; animation-delay: 2s;"></div>
    <div class="bubble" style="width: 40px; height: 40px; left: 50%; animation-duration: 12s; animation-delay: 1s;"></div>
    <div class="bubble" style="width: 25px; height: 25px; left: 70%; animation-duration: 9s; animation-delay: 3s;"></div>
    <div class="bubble" style="width: 35px; height: 35px; left: 85%; animation-duration: 11s; animation-delay: 0.5s;"></div>

    <!-- NAV - Floating Bar -->
    <nav class="fixed top-6 left-1/2 -translate-x-1/2 z-50 px-8 py-4 flex justify-between items-center bg-white/70 backdrop-blur-md rounded-full shadow-xl border border-cyan-200/50 w-[90%] max-w-2xl">
      <h1 class="text-xl font-bold text-cyan-900 flex items-center gap-2">
        <span class="text-2xl">üêü</span> My Space
      </h1>
      <a href="#" class="px-6 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-full text-sm font-semibold shadow-md hover:shadow-lg hover:scale-105 transition-all">
        Memories
      </a>
    </nav>

    <!-- HERO with Mola Mola -->
    <section class="relative z-10 max-w-4xl mx-auto px-8 py-20">
      <!-- Floating Mola Mola -->
      <div class="absolute -top-10 right-0 mola-float opacity-20 pointer-events-none">
        <svg width="200" height="200" viewBox="0 0 200 200" class="mola-swim">
          <ellipse cx="100" cy="100" rx="70" ry="90" fill="#7DD3FC" opacity="0.6"/>
          <ellipse cx="100" cy="100" rx="50" ry="70" fill="#38BDF8"/>
          <circle cx="80" cy="80" r="8" fill="#1E3A8A"/>
          <path d="M 30 100 Q 20 90, 25 80" stroke="#0C4A6E" stroke-width="3" fill="none"/>
          <path d="M 170 80 L 185 70 L 180 90 Z" fill="#38BDF8"/>
          <path d="M 170 120 L 185 130 L 180 110 Z" fill="#38BDF8"/>
        </svg>
      </div>

      <h2 class="text-5xl font-bold mb-6 leading-tight text-cyan-900">
        Hi, I'm Aqueena. üåä
      </h2>

      <p class="text-lg text-gray-700 mb-4">
        Welcome to my little corner of the ocean ‚Äî a place where I keep the
        memories that matter to me, floating gently like a Mola Mola in deep waters.
      </p>

      <p class="text-lg text-gray-700 mb-4">
        Some memories are happy, some soft, some painful ‚Äî but they make me who I
        am. This website is where I store them, preserved in the currents of time.
      </p>

      <p class="text-lg text-cyan-800 mb-10 font-medium">
        Dive in and explore a few memories from my life.
      </p>
    </section>

    <!-- MEMORY PREVIEW -->
    <section class="relative z-10 max-w-5xl mx-auto px-6 grid grid-cols-1 md:grid-cols-2 gap-8 mb-20">
      {preview.map((item, index) => (
        <button 
          data-memory-index={index}
          class="memory-card group block relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-2xl transition-all overflow-hidden border-2 border-cyan-200 hover:border-cyan-400 hover:-translate-y-2 cursor-pointer w-full text-left"
        >
          <div class="relative overflow-hidden h-80">
            <img
              src={item.image}
              alt={item.title}
              class="h-full w-full object-cover group-hover:scale-110 transition-transform duration-500"
            />
            
            <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
              <p class="text-white text-lg font-semibold mb-2">üìÖ {item.date}</p>
              <p class="text-cyan-200 text-base">üìç {item.location}</p>
            </div>
          </div>
        </button>
      ))}
    </section>

    <!-- MODAL -->
    <div id="modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] hidden items-center justify-center p-4 modal-backdrop">
      <div class="relative bg-white/95 backdrop-blur-md rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border-2 border-cyan-300 modal-content">
        <!-- Close Button -->
        <button 
          id="close-modal"
          class="absolute top-4 right-4 z-10 bg-cyan-500 hover:bg-cyan-600 text-white rounded-full p-3 shadow-lg hover:scale-110 transition-all"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>

        <!-- Modal Content -->
        <div id="modal-content" class="p-8">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>
    </div>

    <!-- VIEW ALL BUTTON -->
    <div class="relative z-10 w-full text-center pb-20">
      <a href="#" class="inline-flex items-center gap-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-8 py-4 rounded-full text-lg font-semibold shadow-xl hover:shadow-2xl hover:scale-105 transition-all">
        <span>üêü</span> View All Memories <span>‚Üí</span>
      </a>
    </div>

    <!-- Decorative Mola Mola at Bottom -->
    <div class="relative z-10 max-w-4xl mx-auto px-6 pb-12 text-center">
      <svg width="120" height="120" viewBox="0 0 200 200" class="inline-block mola-float opacity-30">
        <ellipse cx="100" cy="100" rx="70" ry="90" fill="#7DD3FC" opacity="0.6"/>
        <ellipse cx="100" cy="100" rx="50" ry="70" fill="#38BDF8"/>
        <circle cx="80" cy="80" r="8" fill="#1E3A8A"/>
        <circle cx="75" cy="78" r="3" fill="white"/>
        <path d="M 30 100 Q 20 90, 25 80" stroke="#0C4A6E" stroke-width="3" fill="none"/>
        <path d="M 170 80 L 185 70 L 180 90 Z" fill="#38BDF8"/>
        <path d="M 170 120 L 185 130 L 180 110 Z" fill="#38BDF8"/>
      </svg>
      <p class="text-cyan-700 italic mt-4">
        "Just keep swimming through memories..." ‚Äî Mola Mola wisdom
      </p>
    </div>

    <!-- FOOTER -->
    <footer class="relative z-10 w-full text-center py-8 bg-cyan-900/10 backdrop-blur-sm text-cyan-800 text-sm border-t border-cyan-200">
      <p class="mb-2">¬© {new Date().getFullYear()} Yusuf ‚Äî My Space üåä</p>
      <p class="text-xs text-cyan-600">Swimming through memories, one wave at a time</p>
    </footer>

    <script define:vars={{ memories: preview }}>
      const modal = document.getElementById('modal');
      const modalContent = document.getElementById('modal-content');
      const closeBtn = document.getElementById('close-modal');
      const memoryCards = document.querySelectorAll('.memory-card');

      function openModal(index) {
        const memory = memories[index];
        
        modalContent.innerHTML = `
          <img 
            src="${memory.image}" 
            alt="${memory.title}" 
            class="w-full h-96 object-cover rounded-2xl mb-6 shadow-lg"
          />
          <h3 class="text-3xl font-bold text-cyan-900 mb-4">${memory.title}</h3>
          <div class="flex gap-6 mb-6 text-gray-700">
            <p class="flex items-center gap-2">
              <span class="text-xl">üìÖ</span>
              <span class="font-semibold">${memory.date}</span>
            </p>
            <p class="flex items-center gap-2">
              <span class="text-xl">üìç</span>
              <span class="font-semibold">${memory.location}</span>
            </p>
          </div>
          <p class="text-lg text-gray-700 leading-relaxed">${memory.description}</p>
        `;
        
        modal.classList.remove('hidden');
        modal.classList.add('flex');
        document.body.style.overflow = 'hidden';
      }

      function closeModal() {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
        document.body.style.overflow = 'auto';
      }

      // Add click event to each memory card
      memoryCards.forEach(card => {
        card.addEventListener('click', () => {
          const index = parseInt(card.getAttribute('data-memory-index'));
          openModal(index);
        });
      });

      // Close button
      closeBtn.addEventListener('click', closeModal);

      // Close modal when clicking outside
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
          closeModal();
        }
      });

      // Close modal with ESC key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          closeModal();
        }
      });
    </script>
  </body>
</html>